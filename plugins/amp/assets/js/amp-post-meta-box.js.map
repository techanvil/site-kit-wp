{"version":3,"file":"amp-post-meta-box.js","mappings":"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","sources":["webpack://amp-wp/./assets/src/classic-editor/amp-post-meta-box.js"],"sourcesContent":["/* global jQuery */\n\n/**\n * AMP Post Meta Box.\n *\n * @todo Rename this to be just the ampEditPostScreen?\n * @since 0.6\n */\nwindow.ampPostMetaBox = ( function( $ ) {\n\t'use strict';\n\n\tconst component = {\n\n\t\t/**\n\t\t * Holds data.\n\t\t *\n\t\t * @since 0.6\n\t\t */\n\t\tdata: {\n\t\t\tcanonical: false, // Overridden by amp_is_canonical().\n\t\t\tpreviewLink: '',\n\t\t\tenabled: true, // Overridden by amp_is_post_supported( $post ).\n\t\t\tcanSupport: true, // Overridden by count( AMP_Post_Type_Support::get_support_errors( $post ) ) === 0.\n\t\t\tstatusInputName: '',\n\t\t\tl10n: {\n\t\t\t\tampPreviewBtnLabel: '',\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * Toggle animation speed.\n\t\t *\n\t\t * @since 0.6\n\t\t */\n\t\ttoggleSpeed: 200,\n\n\t\t/**\n\t\t * Core preview button selector.\n\t\t *\n\t\t * @since 0.6\n\t\t */\n\t\tpreviewBtnSelector: '#post-preview',\n\n\t\t/**\n\t\t * AMP preview button selector.\n\t\t *\n\t\t * @since 0.6\n\t\t */\n\t\tampPreviewBtnSelector: '#amp-post-preview',\n\t};\n\n\t/**\n\t * Boot plugin.\n\t *\n\t * @since 0.6\n\t * @param {Object} data Object data.\n\t * @return {void}\n\t */\n\tcomponent.boot = function boot( data ) {\n\t\tcomponent.data = data;\n\t\t$( document ).ready( function() {\n\t\t\tcomponent.statusRadioInputs = $( '[name=\"' + component.data.statusInputName + '\"]' );\n\t\t\tif ( component.data.enabled && ! component.data.canonical ) {\n\t\t\t\tcomponent.addPreviewButton();\n\t\t\t}\n\t\t\tcomponent.listen();\n\t\t} );\n\t};\n\n\t/**\n\t * Events listener.\n\t *\n\t * @since 0.6\n\t * @return {void}\n\t */\n\tcomponent.listen = function listen() {\n\t\t$( component.ampPreviewBtnSelector ).on( 'click.amp-post-preview', function( e ) {\n\t\t\te.preventDefault();\n\t\t\tcomponent.onAmpPreviewButtonClick();\n\t\t} );\n\n\t\tcomponent.statusRadioInputs.prop( 'disabled', true ); // Prevent cementing setting default status as overridden status.\n\t\t$( '.edit-amp-status, [href=\"#amp_status\"]' ).click( function( e ) {\n\t\t\te.preventDefault();\n\t\t\tcomponent.statusRadioInputs.prop( 'disabled', false );\n\t\t\tcomponent.toggleAmpStatus( $( e.target ) );\n\t\t} );\n\n\t\t$( '#submitpost input[type=\"submit\"]' ).on( 'click', function() {\n\t\t\t$( component.ampPreviewBtnSelector ).addClass( 'disabled' );\n\t\t} );\n\t};\n\n\t/**\n\t * Add AMP Preview button.\n\t *\n\t * @since 0.6\n\t * @return {void}\n\t */\n\tcomponent.addPreviewButton = function addPreviewButton() {\n\t\tconst previewBtn = $( component.previewBtnSelector );\n\t\tpreviewBtn\n\t\t\t.clone()\n\t\t\t.insertAfter( previewBtn )\n\t\t\t.prop( {\n\t\t\t\thref: component.data.previewLink,\n\t\t\t\tid: component.ampPreviewBtnSelector.replace( '#', '' ),\n\t\t\t} )\n\t\t\t.text( component.data.l10n.ampPreviewBtnLabel )\n\t\t\t.parent()\n\t\t\t.addClass( 'has-amp-preview' );\n\t};\n\n\t/**\n\t * AMP Preview button click handler.\n\t *\n\t * We trigger the Core preview link for events propagation purposes.\n\t *\n\t * @since 0.6\n\t * @return {void}\n\t */\n\tcomponent.onAmpPreviewButtonClick = function onAmpPreviewButtonClick() {\n\t\t// Flag the AMP preview referer.\n\t\tconst $input = $( '<input>' )\n\t\t\t.prop( {\n\t\t\t\ttype: 'hidden',\n\t\t\t\tname: 'amp-preview',\n\t\t\t\tvalue: 'do-preview',\n\t\t\t} )\n\t\t\t.insertAfter( component.ampPreviewBtnSelector );\n\n\t\t// Trigger Core preview button and remove AMP flag.\n\t\t$( component.previewBtnSelector ).click();\n\t\t$input.remove();\n\t};\n\n\t/**\n\t * Add AMP status toggle.\n\t *\n\t * @since 0.6\n\t * @param {Object} $target Event target.\n\t * @return {void}\n\t */\n\tcomponent.toggleAmpStatus = function toggleAmpStatus( $target ) {\n\t\tconst $container = $( '#amp-status-select' );\n\t\tconst editAmpStatus = $( '.edit-amp-status' );\n\n\t\tlet status = $container.data( 'amp-status' );\n\n\t\t// Don't modify status on cancel button click.\n\t\tif ( ! $target.hasClass( 'button-cancel' ) ) {\n\t\t\tstatus = component.statusRadioInputs.filter( ':checked' ).val();\n\t\t}\n\n\t\tconst $checked = $( '#amp-status-' + status );\n\n\t\t// Toggle elements.\n\t\teditAmpStatus.fadeToggle( component.toggleSpeed, function() {\n\t\t\tif ( editAmpStatus.is( ':visible' ) ) {\n\t\t\t\teditAmpStatus.focus();\n\t\t\t} else {\n\t\t\t\t$container.find( 'input[type=\"radio\"]' ).first().focus();\n\t\t\t}\n\t\t} );\n\t\t$container.slideToggle( component.toggleSpeed );\n\n\t\t// Update status.\n\t\tif ( component.data.canSupport ) {\n\t\t\t$container.data( 'amp-status', status );\n\t\t\t$checked.prop( 'checked', true );\n\t\t\t$( '.amp-status-text' ).text( $checked.next().text() );\n\t\t}\n\t};\n\n\treturn component;\n}( jQuery ) );\n"],"names":["window","ampPostMetaBox","$","component","data","canonical","previewLink","enabled","canSupport","statusInputName","l10n","ampPreviewBtnLabel","toggleSpeed","previewBtnSelector","ampPreviewBtnSelector","boot","document","ready","statusRadioInputs","addPreviewButton","listen","on","e","preventDefault","onAmpPreviewButtonClick","prop","click","toggleAmpStatus","target","addClass","previewBtn","clone","insertAfter","href","id","replace","text","parent","$input","type","name","value","remove","$target","$container","editAmpStatus","status","hasClass","filter","val","$checked","fadeToggle","is","focus","find","first","slideToggle","next","jQuery"],"sourceRoot":""}