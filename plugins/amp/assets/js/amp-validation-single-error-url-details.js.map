{"version":3,"file":"amp-validation-single-error-url-details.js","mappings":"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","sources":["webpack://amp-wp/external window [\"wp\",\"domReady\"]","webpack://amp-wp/webpack/bootstrap","webpack://amp-wp/webpack/runtime/compat get default export","webpack://amp-wp/webpack/runtime/define property getters","webpack://amp-wp/webpack/runtime/global","webpack://amp-wp/webpack/runtime/hasOwnProperty shorthand","webpack://amp-wp/webpack/runtime/make namespace object","webpack://amp-wp/./assets/src/amp-validation/amp-validation-single-error-url-details.js"],"sourcesContent":["module.exports = window[\"wp\"][\"domReady\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\n/**\n * Toggles the contents of a details element as an additional table tr.\n */\nclass RowToggler {\n\tconstructor( tr, index, activeTermId ) {\n\t\tthis.tr = tr;\n\t\tthis.index = index;\n\t\tthis.activeTermId = activeTermId;\n\t}\n\n\t/**\n\t * Sets up the new tr and adds an event listener to toggle details.\n\t */\n\tinit() {\n\t\tthis.details = this.tr.querySelector( '.column-details details' );\n\t\tif ( this.details ) {\n\t\t\tthis.createNewTr();\n\t\t\tconst togglers = [\n\t\t\t\t...this.tr.querySelectorAll( '.single-url-detail-toggle' ),\n\t\t\t\tthis.details.querySelector( 'summary' ),\n\t\t\t];\n\n\t\t\ttogglers.forEach( ( el ) => {\n\t\t\t\tel.addEventListener( 'click', () => {\n\t\t\t\t\tthis.toggle( el );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tthis.maybeInitiallyOpenRow();\n\t}\n\n\t/**\n\t * If the term ID retrieved from the URL query param matches this row's term ID, expand the row on load.\n\t */\n\tmaybeInitiallyOpenRow() {\n\t\tif ( ! this.activeTermId || this.tr.id !== `tag-${ this.activeTermId }` ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggle( this.tr.querySelector( '.single-url-detail-toggle' ) );\n\t}\n\n\t/**\n\t * Creates the details table row from the original row's <details> element content, minus the summary.\n\t */\n\tcreateNewTr() {\n\t\tthis.newTr = document.createElement( 'tr' );\n\t\tthis.newTr.classList.add( 'details' );\n\n\t\tconst newCell = document.createElement( 'td' );\n\t\tnewCell.setAttribute( 'colspan', this.getRowColspan() );\n\n\t\tfor ( const childNode of this.details.childNodes ) {\n\t\t\tif ( 'SUMMARY' !== childNode.tagName ) {\n\t\t\t\tnewCell.appendChild( childNode.cloneNode( true ) );\n\t\t\t}\n\t\t}\n\n\t\tthis.newTr.appendChild( newCell );\n\t}\n\n\t/**\n\t * Gets the number of cells within the original row.\n\t *\n\t * @return {number} The number of cells.\n\t */\n\tgetRowColspan() {\n\t\treturn [ ...this.tr.childNodes ]\n\t\t\t.filter( ( childNode ) => [ 'TD', 'TH' ].includes( childNode.tagName ) )\n\t\t\t.length;\n\t}\n\n\t/**\n\t * Toggles the additional row.\n\t *\n\t * @param {Object} target The click event target.\n\t */\n\ttoggle( target ) {\n\t\tif ( this.tr.classList.contains( 'expanded' ) ) {\n\t\t\tthis.onClose( target );\n\t\t} else {\n\t\t\tthis.onOpen( target );\n\t\t}\n\t}\n\n\t/**\n\t * Adds the additional row.\n\t *\n\t * @param {Object} target The click event target.\n\t */\n\tonOpen( target ) {\n\t\tthis.tr.parentNode.insertBefore( this.newTr, this.tr.nextSibling );\n\t\tthis.tr.classList.add( 'expanded' );\n\n\t\tif ( 'SUMMARY' !== target.tagName ) { // This browser will do this if the summary was clicked.\n\t\t\tthis.details.setAttribute( 'open', true );\n\t\t}\n\t}\n\n\t/**\n\t * Removes the additional row.\n\t *\n\t * @param {Object} target The click event target.\n\t */\n\tonClose( target ) {\n\t\tthis.tr.parentNode.removeChild( this.newTr );\n\t\tthis.tr.classList.remove( 'expanded' );\n\n\t\tif ( 'SUMMARY' !== target.tagName ) {\n\t\t\tthis.details.removeAttribute( 'open' );\n\t\t}\n\t}\n}\n\n/**\n * Sets up expandable details for errors when viewing a single URL error list.\n */\nclass ErrorRows {\n\tconstructor( activeTermId ) {\n\t\tthis.rows = [ ...document.querySelectorAll( '.wp-list-table tr[id^=\"tag-\"]' ) ]\n\t\t\t.map( ( tr, index ) => {\n\t\t\t\tconst rowHandler = new RowToggler( tr, index, activeTermId );\n\t\t\t\trowHandler.init();\n\t\t\t\treturn rowHandler;\n\t\t\t} )\n\t\t\t.filter( ( row ) => row.details );\n\t}\n\n\tinit() {\n\t\tthis.addToggleAllListener();\n\t}\n\n\t/**\n\t * Handle 'toggle all' buttons on the page.\n\t */\n\taddToggleAllListener() {\n\t\tlet open = false;\n\t\tconst toggleButtons = [ ...document.querySelectorAll( '.column-details button.error-details-toggle' ) ];\n\n\t\tconst onButtonClick = ( target ) => {\n\t\t\topen = ! open;\n\t\t\tthis.rows.forEach( ( row ) => {\n\t\t\t\tif ( open ) {\n\t\t\t\t\trow.onOpen( target );\n\t\t\t\t} else {\n\t\t\t\t\trow.onClose( target );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tglobal.addEventListener( 'click', ( event ) => {\n\t\t\tif ( toggleButtons.includes( event.target ) ) {\n\t\t\t\tonButtonClick( event.target );\n\t\t\t}\n\t\t} );\n\t}\n}\n\ndomReady( () => {\n\tlet activeTermId = null;\n\n\tconst matches = window.location.hash.match( /^#tag-(\\d+)/ );\n\tif ( matches ) {\n\t\tactiveTermId = parseInt( matches[ 1 ] );\n\t}\n\n\tnew ErrorRows( activeTermId ).init();\n} );\n"],"names":["domReady","RowToggler","constructor","tr","index","activeTermId","init","details","querySelector","createNewTr","togglers","querySelectorAll","forEach","el","addEventListener","toggle","maybeInitiallyOpenRow","id","newTr","document","createElement","classList","add","newCell","setAttribute","getRowColspan","childNode","childNodes","tagName","appendChild","cloneNode","filter","includes","length","target","contains","onClose","onOpen","parentNode","insertBefore","nextSibling","removeChild","remove","removeAttribute","ErrorRows","rows","map","rowHandler","row","addToggleAllListener","open","toggleButtons","onButtonClick","global","event","matches","window","location","hash","match","parseInt"],"sourceRoot":""}