{"version":3,"file":"amp-theme-install.js","mappings":"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","sources":["webpack://amp-wp/./assets/src/admin/theme-install/view/theme.js","webpack://amp-wp/external var \"ampThemes\"","webpack://amp-wp/external window [\"wp\",\"domReady\"]","webpack://amp-wp/external window [\"wp\",\"i18n\"]","webpack://amp-wp/webpack/bootstrap","webpack://amp-wp/webpack/runtime/compat get default export","webpack://amp-wp/webpack/runtime/define property getters","webpack://amp-wp/webpack/runtime/hasOwnProperty shorthand","webpack://amp-wp/webpack/runtime/make namespace object","webpack://amp-wp/./assets/src/admin/amp-theme-install.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { AMP_THEMES, AMP_COMPATIBLE, NONE_WPORG_THEMES } from 'amp-themes'; // From WP inline script.\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\nconst wpThemeView = wp.themes.view.Theme;\n\nexport default wpThemeView.extend( {\n\n\t/**\n\t * Check if \"AMP Compatible\" tab is open or not.\n\t */\n\tisAmpCompatibleTab() {\n\t\tconst queryParams = new URLSearchParams( window.location.search.substr( 1 ) );\n\t\treturn queryParams.get( 'browse' ) === AMP_COMPATIBLE;\n\t},\n\n\t/**\n\t * Render theme card.\n\t *\n\t * @param {...any} args Render arguments.\n\t */\n\trender( ...args ) {\n\t\twpThemeView.prototype.render.apply( this, args );\n\n\t\tif ( 0 >= this.$el?.length || ! this.$el[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = this.$el[ 0 ];\n\n\t\tconst data = this.model.toJSON();\n\t\tlet slug = data?.slug;\n\n\t\tif ( ! slug ) {\n\t\t\tslug = data?.id;\n\t\t}\n\n\t\tif ( slug && this.isAmpTheme( slug ) ) {\n\t\t\t/*\n\t\t\t * Note: the setTimeout is needed because when the user taps on the AMP Compatible tab, the UI will render\n\t\t\t * before history.pushState() is called, meaning isAmpCompatibleTab cannot be called yet to inspect the\n\t\t\t * current location. By waiting for the next tick, we can safely read it.\n\t\t\t */\n\t\t\tsetTimeout( () => {\n\t\t\t\tif ( this.isAmpCompatibleTab() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst messageElement = document.createElement( 'div' );\n\t\t\t\tconst iconElement = document.createElement( 'span' );\n\t\t\t\tconst tooltipElement = document.createElement( 'span' );\n\n\t\t\t\tmessageElement.classList.add( 'amp-extension-card-message' );\n\t\t\t\ticonElement.classList.add( 'amp-logo-icon' );\n\t\t\t\ttooltipElement.classList.add( 'tooltiptext' );\n\n\t\t\t\ttooltipElement.append(\n\t\t\t\t\t__( 'This is known to work well with the AMP plugin.', 'amp' ),\n\t\t\t\t);\n\n\t\t\t\tmessageElement.append( iconElement, tooltipElement );\n\n\t\t\t\telement.appendChild( messageElement );\n\t\t\t} );\n\t\t}\n\n\t\tif ( slug && ! this.isWPORGTheme( slug ) ) {\n\t\t\tconst externalLinkIcon = document.createElement( 'span' );\n\t\t\texternalLinkIcon.classList.add( 'dashicons', 'dashicons-external' );\n\t\t\texternalLinkIcon.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\tconst screenReaderText = document.createElement( 'span' );\n\t\t\tscreenReaderText.classList.add( 'screen-reader-text' );\n\t\t\tscreenReaderText.append( __( '(opens in a new tab)', 'amp' ) );\n\n\t\t\tconst siteLinkButton = document.createElement( 'a' );\n\t\t\tsiteLinkButton.classList.add( 'button', 'button-primary' );\n\t\t\tsiteLinkButton.append( __( 'Visit Site', 'amp' ), screenReaderText, externalLinkIcon );\n\n\t\t\tif ( data?.preview_url ) {\n\t\t\t\tsiteLinkButton.href = data.preview_url;\n\t\t\t} else {\n\t\t\t\tsiteLinkButton.href = data.homepage;\n\t\t\t}\n\n\t\t\tsiteLinkButton.target = '_blank';\n\t\t\tsiteLinkButton.rel = 'noopener noreferrer';\n\t\t\tsiteLinkButton.setAttribute( 'aria-label', sprintf(\n\t\t\t\t/* translators: %s: theme name. */\n\t\t\t\t__( 'Visit site of %s theme', 'amp' ),\n\t\t\t\tdata.name,\n\t\t\t) );\n\n\t\t\tconst themeActions = element.querySelector( '.theme-actions' );\n\t\t\tif ( themeActions ) {\n\t\t\t\tthemeActions.textContent = ''; // Remove children.\n\t\t\t\tthemeActions.append( siteLinkButton );\n\t\t\t}\n\n\t\t\tconst moreDetail = element.querySelector( '.more-details' );\n\t\t\tif ( moreDetail ) {\n\t\t\t\tmoreDetail.textContent = ''; // Remove children.\n\t\t\t\tmoreDetail.append( __( 'Visit Site', 'amp' ), externalLinkIcon.cloneNode( true ) );\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Prevent the preview of none WordPress org theme and redirect to theme site.\n\t *\n\t * @param {...any} args Preview arguments.\n\t */\n\tpreview( ...args ) {\n\t\tconst data = this.model.toJSON();\n\n\t\tif ( this.isWPORGTheme( data.slug ) ) {\n\t\t\twpThemeView.prototype.preview.apply( this, args );\n\t\t} else if ( data?.preview_url ) {\n\t\t\twindow.open( data.preview_url, '_blank', 'noopener,noreferrer' );\n\t\t}\n\t},\n\n\t/**\n\t * Check if a theme is AMP compatible or not.\n\t *\n\t * @param {string} slug Theme slug.\n\t * @return {boolean} True if theme is AMP compatible, Otherwise False.\n\t */\n\tisAmpTheme( slug ) {\n\t\treturn AMP_THEMES.includes( slug );\n\t},\n\n\t/**\n\t * Check if a theme is from WordPress org or not.\n\t *\n\t * @param {string} slug Theme slug.\n\t * @return {boolean} True if theme is listed in WordPress org, Otherwise False.\n\t */\n\tisWPORGTheme( slug ) {\n\t\treturn ( ! NONE_WPORG_THEMES.includes( slug ) );\n\t},\n} );\n","module.exports = ampThemes;","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport { AMP_COMPATIBLE } from 'amp-themes'; // From WP inline script.\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport domReady from '@wordpress/dom-ready';\n\n/**\n * Internal dependencies\n */\nimport ampViewTheme from './theme-install/view/theme';\n\nconst ampThemeInstall = {\n\n\t/**\n\t * Init function.\n\t */\n\tinit() {\n\t\tthis.addTab();\n\t\tthis.overrideViews();\n\t},\n\n\t/**\n\t * Add a new tab for AMP-compatible themes on theme install page.\n\t */\n\taddTab() {\n\t\tconst filterLinks = document.querySelector( '.filter-links' );\n\t\tif ( ! filterLinks ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst listItem = document.createElement( 'li' );\n\t\tconst anchorElement = document.createElement( 'a' );\n\n\t\tanchorElement.setAttribute( 'href', '#' );\n\t\tanchorElement.setAttribute( 'data-sort', AMP_COMPATIBLE );\n\t\tanchorElement.append( __( 'AMP Compatible', 'amp' ) );\n\n\t\tlistItem.appendChild( anchorElement );\n\n\t\tfilterLinks.appendChild( listItem );\n\t},\n\n\t/**\n\t * Override theme view.\n\t */\n\toverrideViews() {\n\t\twp.themes.view.Theme = ampViewTheme;\n\t},\n\n};\n\ndomReady( () => {\n\tampThemeInstall.init();\n} );\n"],"names":["AMP_THEMES","AMP_COMPATIBLE","NONE_WPORG_THEMES","__","sprintf","wpThemeView","wp","themes","view","Theme","extend","isAmpCompatibleTab","queryParams","URLSearchParams","window","location","search","substr","get","render","args","prototype","apply","$el","length","element","data","model","toJSON","slug","id","isAmpTheme","setTimeout","messageElement","document","createElement","iconElement","tooltipElement","classList","add","append","appendChild","isWPORGTheme","externalLinkIcon","setAttribute","screenReaderText","siteLinkButton","preview_url","href","homepage","target","rel","name","themeActions","querySelector","textContent","moreDetail","cloneNode","preview","open","includes","domReady","ampViewTheme","ampThemeInstall","init","addTab","overrideViews","filterLinks","listItem","anchorElement"],"sourceRoot":""}